p8105_hw3_lz3014
================
2024-10-14

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

# Problem 1

``` r
library(p8105.datasets)
data("ny_noaa")
```

### 1.Write a short description of the dataset.

This dataset contains 2595176 rows and 7 columns, including seven
variables: `id` (weather station id), `date` (date of observation),
`prcp` (total daily precipitation), `snow` (snowfall), `snwd` (snow
depth), `tmax` and `tmin` (min and max temperature).

### 2.Do some data cleaning.

``` r
ny_noaa_clean <- ny_noaa |>
  separate(date, into = c("year", "month", "day"), convert = TRUE) |>
  mutate(tmax = as.numeric(tmax), tmin = as.numeric(tmin))
```

- For snowfall, what are the most commonly observed values? Why? 0 is
  the most commonly observed value for snowfall, because most days of
  the year, it does not snow in NY.

``` r
ny_noaa_clean |>
  count(snow) |>
  arrange(desc(n))
```

    ## # A tibble: 282 × 2
    ##     snow       n
    ##    <int>   <int>
    ##  1     0 2008508
    ##  2    NA  381221
    ##  3    25   31022
    ##  4    13   23095
    ##  5    51   18274
    ##  6    76   10173
    ##  7     8    9962
    ##  8     5    9748
    ##  9    38    9197
    ## 10     3    8790
    ## # ℹ 272 more rows

### 3.Make a two-panel plot showing the average max temperature in January and in July in each station across years.

``` r
ny_noaa_clean |>
  filter(month %in% c(1, 7)) |>
  group_by(id, year, month) |>
  summarise(mean_tmax = mean(tmax, na.rm = TRUE)) |>
  ggplot(aes(x = year, y = mean_tmax, color = as.factor(month))) +
  geom_point() +
  geom_line() +
  facet_wrap(~ month, scales = "free_y") +
  labs(
    title = "Average Max Temperature in January and July across Stations",
    x = "Year",
    y = "Average Max Temperature (°C)",
    color = "Month"
  )
```

    ## `summarise()` has grouped output by 'id', 'year'. You can override using the
    ## `.groups` argument.

    ## Warning: Removed 5970 rows containing missing values or values outside the scale range
    ## (`geom_point()`).

![](p8105_hw3_lz3014_files/figure-gfm/unnamed-chunk-5-1.png)<!-- -->

- Is there any observable / interpretable structure? Any outliers? the
  mean temperature in January is significantly lower than in July across
  all stations and years. Stations generally show similar temperature
  trends over time—when one station records a higher temperature for a
  given year, others tend to follow the same pattern. However, we
  observe an unusually cold station in July of 1987 or 1988, along with
  a few other minor outliers.

### 4.Make a two-panel plot

- 1)  tmax vs tmin for the full dataset (note that a scatterplot may not
      be the best option)

``` r
ny_noaa_clean |>
  ggplot(aes(x = tmin, y = tmax)) +
  geom_point(alpha = 0.3) +
  geom_smooth(method = "lm", color = "lightblue", se = FALSE) + 
  labs(
    title = "Tmax vs Tmin",
    x = "Minimum Temperature (°C)",
    y = "Maximum Temperature (°C)"
  )
```

    ## `geom_smooth()` using formula = 'y ~ x'

    ## Warning: Removed 1136276 rows containing non-finite outside the scale range
    ## (`stat_smooth()`).

    ## Warning: Removed 1136276 rows containing missing values or values outside the scale
    ## range (`geom_point()`).

![](p8105_hw3_lz3014_files/figure-gfm/unnamed-chunk-6-1.png)<!-- -->

- 2)  make a plot showing the distribution of snowfall values greater
      than 0 and less than 100 separately by year.

``` r
ny_noaa_clean |>
  filter(snow > 0, snow < 100) |>
  ggplot(aes(x = snow)) +
  geom_histogram(binwidth = 5, fill = "lightblue", color = "lightyellow") +
  facet_wrap(~ year) +
  labs(
    title = "Distribution of Snowfall by Year",
    x = "Snowfall",
    y = "Count"
  )
```

![](p8105_hw3_lz3014_files/figure-gfm/unnamed-chunk-7-1.png)<!-- -->
